<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUBWAY 써브웨이</title>
    <link rel="stylesheet" href="scss/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/220fae79fc.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/220fae79fc.js" crossorigin="anonymous"></script>
</head>

<body>
<header>
    <div class="inner">
        <h1><a href="main.html"><img src="img/subwayLogo.png" alt="서브웨이 로고"></a></h1>
        <nav>
            <ul>
                <li><a href="login.html">로그인</a></li>
                <li><a href="agreement.html">회원가입</a></li>
            </ul>
        </nav>
    </div>
</header>
<section class="makeOn">
    <a href="make.html">레시피 만들러 가기</a>
</section>
<section class="search">
    <h1>검색 조건을 선택해주세요.</h1>

    <div class="inner">
        <table>
            <caption class="hidden">검색을 위한 조건 테이블</caption>
            <tr>
                <th scope="row">메뉴</th>
                <td>
                    <article class="menuPic">
                        <ul id="sandwich-list">

                        </ul>
                    </article>
                </td>
            </tr>
            <tr>
                <th scope="row">싫은 채소</th>
                <td>
                    <div>
                    <label for="오이 제외">오이 제외</label>
                    <input type="radio" name="싫은 채소" value="오이 제외">
                    </div>
                <div>
                    <label for="오이 제외">오이 제외</label>
                    <input type="radio" name="싫은 채소" value="오이 제외">
                </div>
                <div>
                    <label for="오이 제외">오이 제외</label>
                    <input type="radio" name="싫은 채소" value="오이 제외">
                </div>
                </td>
            </tr>
        </table>
        <div class="slideBox">

            <div class="middle">
                <h2>가격</h2>
                <div class="multi-range-slider">
                    <!-- 진짜 슬라이더 -->
                    <input type="range" id="input-left" min="0" max="20000" value="5000" />
                    <input type="range" id="input-right" min="0" max="20000" value="15000" />

                    <!-- 커스텀 슬라이더 -->
                    <div class="slider">
                        <div class="track"></div>
                        <div class="range"></div>
                        <div class="thumb left"></div>
                        <div class="thumb right"></div>
                    </div>
                </div>
                <div class="valueBox">
                    <p>최솟값 : <span class="minValue"></span></p>
                    <p>최댓값 : <span class="maxValue"></span></p>
                </div>

            </div>
        </div>
        <div class="slideBox">

            <div class="middle">
                <h2>칼로리</h2>
                <div class="multi-range-slider">
                    <!-- 진짜 슬라이더 -->
                    <input type="range" id="input-left" min="0" max="3000" value="750" />
                    <input type="range" id="input-right" min="0" max="3000" value="2250" />

                    <!-- 커스텀 슬라이더 -->
                    <div class="slider">
                        <div class="track"></div>
                        <div class="range"></div>
                        <div class="thumb left"></div>
                        <div class="thumb right"></div>
                    </div>
                </div>
                <div class="valueBox">
                    <p>최솟값 : <span class="minValue"></span></p>
                    <p>최댓값 : <span class="maxValue"></span></p>
                </div>
            </div>
        </div>
        <div class="slideBox">

            <div class="middle">
                <h2>단백질</h2>
                <div class="multi-range-slider">
                    <!-- 진짜 슬라이더 -->
                    <input type="range" id="input-left" min="0" max="100" value="25" />
                    <input type="range" id="input-right" min="0" max="100" value="75" />

                    <!-- 커스텀 슬라이더 -->
                    <div class="slider">
                        <div class="track"></div>
                        <div class="range"></div>
                        <div class="thumb left"></div>
                        <div class="thumb right"></div>
                    </div>
                </div>
                <div class="valueBox">
                    <p>최솟값 : <span class="minValue"></span></p>
                    <p>최댓값 : <span class="maxValue"></span></p>
                </div>
            </div>
        </div>
        <div class="slideBox">

            <div class="middle">
                <h2>지방</h2>
                <div class="multi-range-slider">
                    <!-- 진짜 슬라이더 -->
                    <input type="range" id="input-left" min="0" max="100" value="25" />
                    <input type="range" id="input-right" min="0" max="100" value="75" />

                    <!-- 커스텀 슬라이더 -->
                    <div class="slider">
                        <div class="track"></div>
                        <div class="range"></div>
                        <div class="thumb left"></div>
                        <div class="thumb right"></div>
                    </div>
                </div>
                <div class="valueBox">
                    <p>최솟값 : <span class="minValue"></span></p>
                    <p>최댓값 : <span class="maxValue"></span></p>
                </div>
            </div>
        </div>
        
        <div class="drop">
        <div class="dropBox">
            <select>
                <option selected>정렬</option>
                <option value="new">등록일</option>
                <option value="price">가격</option>
                <option value="jmt">추천</option>
                <option value="respect">비추</option>
                <option value="kcal">칼로리</option>
                <option value="protein">단백질</option>
                <option value="fat">지방</option>
            </select>
          
        </div>
        <div class="sortOption">
            <div>
                <label for="오름차 순">오름차 순</label>
                <input type="radio" name="정렬" value="ASC">
                </div>
            <div>
                <label for="내림차 순">내림차 순</label>
                <input type="radio" name="정렬" value="DESC">
            </div>
        </div>
    </div>


    <button>
        검색
    </button>
    </div>
</section>
<section class="community">
    <div class="inner">
        <h1>검색결과</h1>

        <article class="commuList">


        </article>




        <div class="pagination">
            <a href="#" class="prev">
                <i class="fa-solid fa-angles-left"></i>
            </a>
            <p class="numbers">
                <a href="">1</a>
                <a href="">2</a>
                <a href="">3</a>
                <a href="">4</a>
                <a href="">5</a>
                <a href="">6</a>
                <a href="">7</a>
                <a href="">8</a>
                <a href="">9</a>
                <a href="">10</a>
            </p>
            <a href="#" class="next">
                <i class="fa-solid fa-angles-right"></i>
            </a>
        </div>
    </div>
</section>

<footer>
    <div class="inner">
        <div class="footerMenu">
            <ul>
                <li>개인정보처리방침</li>
                <li>서비스이용약관</li>
            </ul>
        </div>
        <div class="footerMenu2">
            <ul>
                <li>회사명 : ㈜서브웨이</li>
                <li>사업자등록번호 : 123-45-67890</li>
                <li> COPYRIGHT(C) 2023 ㈜서브웨이. CO.LTD ALL RIGHT RESERVED.</li>
            </ul>
        </div>
    </div>
</footer>

<script>
    window.onload = function () {
        dataSettingByUrl("https://api.sub-recipe.com/materials/sandwich-bases");
        dataSettingByUrl("https://api.sub-recipe.com/materials/breads")
        dataSettingByUrl("https://api.sub-recipe.com/materials/cheeses")
        dataSettingByUrl("https://api.sub-recipe.com/materials/veggies")
        dataSettingByUrl("https://api.sub-recipe.com/materials/sauces")
    };


    const inputLeft = document.querySelector("#input-left");
    const inputRight = document.querySelector("#input-right");

    const thumbLeft = document.querySelector(".slider > .thumb.left");
    const thumbRight = document.querySelector(".slider > .thumb.right");
    const range = document.querySelector(".slider > .range");

    const minOutput = document.querySelector(".minValue");
    const maxOutput = document.querySelector(".maxValue");
    minOutput.innerHTML = inputLeft.value;
    maxOutput.innerHTML = inputRight.value;

    const setLeftValue = () => {
        const _this = inputLeft;
        const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

        // 교차되지 않게, 1을 빼준 건 완전히 겹치기보다는 어느 정도 간격을 남겨두기 위해.
        _this.value = Math.min(parseInt(_this.value), parseInt(inputRight.value) - 1);

        // input, thumb 같이 움직이도록
        const percent = ((_this.value - min) / (max - min)) * 100;
        thumbLeft.style.left = percent + "%";
        range.style.left = percent + "%";

        inputLeft.oninput = function() {
            minOutput.innerHTML = Math.floor((this.value / 100))*100;
        }

    };

    const setRightValue = () => {
        const _this = inputRight;
        const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

        // 교차되지 않게, 1을 더해준 건 완전히 겹치기보다는 어느 정도 간격을 남겨두기 위해.
        _this.value = Math.max(parseInt(_this.value), parseInt(inputLeft.value) + 1);

        // input, thumb 같이 움직이도록
        const percent = ((_this.value - min) / (max - min)) * 100;
        thumbRight.style.right = 100 - percent + "%";
        range.style.right = 100 - percent + "%";

        inputRight.oninput = function() {
            maxOutput.innerHTML = Math.floor((this.value / 100))*100 ;
        }

    };

    inputLeft.addEventListener("input", setLeftValue);
    inputRight.addEventListener("input", setRightValue);




</script>
<script>
        window.onload = function () {
        dataSettingByUrl("https://api.sub-recipe.com/materials/sandwich-bases");
        communityBaseData(dataList);
        };

        async function dataSettingByUrl(url) {

        let responsePromise = fetch(url)
        .then(data => {
        if (data.ok) {
        return data.json();
        }
        })
        .then(response => {
        if (url.match("sandwich-bases")) {
        setSandwichBaseData(response.sandwichBases)

        return;
        }

        });

        }

        function setSandwichBaseData(sandwichBaseDataList) {

        const ulList = document.getElementById("sandwich-list");

        sandwichBaseDataList.forEach(item => {
        const liElement = document.createElement('li');
        liElement.innerHTML = `
        <div class="card  border-success mb-3" >
            <div class="card-body">
                <img src="${item.image}" class="card-img-top" alt="...">
                <div class="card-title">
                      <label for="">${item.korName}</label>
                      <input type="radio"  name="menu" value="menu">
                      <i class="fa-solid fa-check"></i>
                      <div class="grayBox"></div>
                </div>
            </div>
        </div>
        `;
        ulList.appendChild(liElement);
        })

        }

        const dataList = [{
            "id": 3,
            "title": "myTestRecipe",
            "memberId": 1,
            "ownerNickname": "hong",
            "sandwichBaseId": 5,
            "sandwichBaseName": "치킨 베이컨 아보카도",
            "sandwichBaseImagePath": "https://sub-recipe-bucket.s3.ap-northeast-2.amazonaws.com/sandwich/chicken_bacon_avocado.png",
            "totalPrice": 7900,
            "totalKcal": 355,
            "totalProtein": 20.2,
            "totalFat": 3.2,
            "jmtPoint": 5,
            "respectPoint": 0,
            "createTime": "2023-10-02T03:01:18"
        }];

        function communityBaseData(dataList) {

            const commuList = document.querySelector(".commuList");

            dataList.forEach(item => {
                const commuElement = document.createElement('div');
                commuElement.innerHTML = `
        <div class="imgBox"><img src = "${item.sandwichBaseImagePath}">
                <span>
                    ${item.title}
                 </span>
        </div>
        <p><span>작성자 : ${item.ownerNickname}</span></p>
        <p><span>kcal : ${item.totalKcal}</span></p>
        <p><span>fat : ${item.totalFat}</span></p>
        <p><span>protein : ${item.totalProtein}</span></p>
        <div class="thumbsBox">
            <p><i class="fa-solid fa-thumbs-up"></i><span>0</span></p>
            <p><i class="fa-solid fa-thumbs-down"></i><span>0</span></p>
         </div>
        `;
                commuList.appendChild(commuElement );
            })

        }

</script>

</body>